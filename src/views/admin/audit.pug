extends ../layouts/main

block content
  div(class="max-w-6xl mx-auto")
    
    // Header
    div(class="flex justify-between items-end mb-8")
      div
        h2(class="text-xs font-bold text-purple-500 dark:text-purple-400 mb-1 tracking-widest uppercase") Seguridad
        h1(class="text-3xl font-bold text-slate-900 dark:text-white") Bitácora de <span class="text-purple-600 dark:text-purple-400">Auditoría</span>
      
      div(class="text-right")
        a(href="/" class="text-slate-500 hover:text-slate-800 dark:text-slate-400 dark:hover:text-white font-bold text-sm") &larr; Volver al Inicio

    // Tabla de Registros
    div(class="bg-white dark:bg-slate-800 rounded-[2rem] shadow-xl border border-slate-200 dark:border-slate-700 overflow-hidden")
      div(class="overflow-x-auto")
        table(class="w-full text-left border-collapse")
          thead
            tr(class="bg-slate-50 dark:bg-slate-900/50 border-b border-slate-200 dark:border-slate-700")
              th(class="p-5 text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider") Fecha / Hora
              th(class="p-5 text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider") Usuario
              th(class="p-5 text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider") Acción
              th(class="p-5 text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider") Detalles
          
          tbody(class="divide-y divide-slate-100 dark:divide-slate-700")
            if registros.length > 0
              each log in registros
                tr(class="hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors")
                  // Fecha
                  td(class="p-5 whitespace-nowrap")
                    div(class="flex flex-col")
                      span(class="font-bold text-slate-700 dark:text-slate-200 text-sm") #{new Date(log.createdAt).toLocaleDateString()}
                      span(class="text-xs text-slate-400") #{new Date(log.createdAt).toLocaleTimeString()}
                  
                  // Usuario
                  td(class="p-5")
                    if log.Usuario
                      div(class="flex items-center gap-3")
                        div(class="w-8 h-8 rounded-full bg-slate-200 dark:bg-slate-600 flex items-center justify-center text-xs font-bold") #{log.Usuario.nombre.charAt(0)}
                        span(class="font-medium text-slate-700 dark:text-slate-200 text-sm") #{log.Usuario.nombre}
                    else
                      span(class="text-red-400 text-xs italic") Usuario Eliminado

                  // Acción (Badges de colores)
                  td(class="p-5")
                    - let colorClass = 'bg-slate-100 text-slate-600 dark:bg-slate-700 dark:text-slate-300'
                    if log.accion.includes('Alta')
                       - colorClass = 'bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300'
                    else if log.accion.includes('Ingreso')
                       - colorClass = 'bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300'
                    else if log.accion.includes('Error') || log.accion.includes('Eliminar')
                       - colorClass = 'bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300'
                    
                    span(class=`px-3 py-1 rounded-full text-xs font-bold ${colorClass}`) #{log.accion}

                  // Detalles
                  td(class="p-5 text-sm text-slate-600 dark:text-slate-400") #{log.detalles}
            else
              tr
                td(colspan="4" class="p-8 text-center text-slate-500") No hay registros de auditoría aún.