mixin formPaciente(data, isDniReadonly = false)
  // --- DATOS PERSONALES ---
  div(class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6")
    // DNI
    div
      label(class="block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider mb-2") DNI *
      if isDniReadonly
        input(type="text" name="dni" value=(data ? data.dni : '') readonly class="w-full px-4 py-3 bg-slate-100 dark:bg-slate-700 border border-slate-300 text-slate-500 font-bold cursor-not-allowed rounded-xl")
      else
        input(type="text" name="dni" required value=(data ? data.dni : '') class="w-full px-4 py-3 bg-slate-50 dark:bg-slate-900 border border-slate-300 dark:border-slate-600 rounded-xl focus:ring-2 focus:ring-blue-500 dark:focus:ring-rose-500 dark:text-white font-mono")

    // Fecha Nacimiento
    div
      label(class="block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider mb-2") Fecha de Nacimiento *
      - var fechaValue = data && data.fecha_nacimiento ? new Date(data.fecha_nacimiento).toISOString().split('T')[0] : ''
      input(type="date" name="fecha_nacimiento" required value=fechaValue class="w-full px-4 py-3 bg-slate-50 dark:bg-slate-900 border border-slate-300 dark:border-slate-600 rounded-xl focus:ring-2 focus:ring-blue-500 dark:text-white text-slate-600")

    // Nombre
    div
      label(class="block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider mb-2") Nombre *
      input(type="text" name="nombre" required value=(data ? data.nombre : '') class="w-full px-4 py-3 bg-slate-50 dark:bg-slate-900 border border-slate-300 dark:border-slate-600 rounded-xl focus:ring-2 focus:ring-blue-500 dark:text-white")

    // Apellido
    div
      label(class="block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider mb-2") Apellido *
      input(type="text" name="apellido" required value=(data ? data.apellido : '') class="w-full px-4 py-3 bg-slate-50 dark:bg-slate-900 border border-slate-300 dark:border-slate-600 rounded-xl focus:ring-2 focus:ring-blue-500 dark:text-white")

    // Sexo
    div
      label(class="block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider mb-2") Sexo *
      div(class="relative")
        select(name="sexo" required class="w-full px-4 py-3 bg-slate-50 dark:bg-slate-900 border border-slate-300 dark:border-slate-600 rounded-xl focus:ring-2 focus:ring-blue-500 dark:text-white appearance-none cursor-pointer")
          option(value="" disabled selected=!data) Seleccione...
          option(value="F" selected=(data && data.sexo === 'F')) Femenino
          option(value="M" selected=(data && data.sexo === 'M')) Masculino
          option(value="X" selected=(data && data.sexo === 'X')) No Binario / Otro
        div(class="absolute inset-y-0 right-0 flex items-center px-4 pointer-events-none text-slate-500")
          svg(class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24")
             path(stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7")

  // --- DATOS DE CONTACTO ---
  div(class="border-t border-slate-100 dark:border-slate-700 pt-4 mb-6")
    h3(class="text-sm font-bold text-slate-400 uppercase tracking-wider mb-4") üìû Contacto
    div(class="grid grid-cols-1 md:grid-cols-2 gap-6")
      div(class="md:col-span-2")
        label(class="block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider mb-2") Direcci√≥n
        input(type="text" name="direccion" value=(data ? data.direccion : '') placeholder="Calle, N√∫mero, Ciudad" class="w-full px-4 py-3 bg-slate-50 dark:bg-slate-900 border border-slate-300 dark:border-slate-600 rounded-xl focus:ring-2 focus:ring-blue-500 dark:text-white")

      div
        label(class="block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider mb-2") Tel√©fono
        input(type="tel" name="telefono" value=(data ? data.telefono : '') placeholder="Ej: 351..." class="w-full px-4 py-3 bg-slate-50 dark:bg-slate-900 border border-slate-300 dark:border-slate-600 rounded-xl focus:ring-2 focus:ring-blue-500 dark:text-white")

      div
        label(class="block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider mb-2") Email (Opcional)
        input(type="email" name="email" value=(data ? data.email : '') placeholder="mail@ejemplo.com" class="w-full px-4 py-3 bg-slate-50 dark:bg-slate-900 border border-slate-300 dark:border-slate-600 rounded-xl focus:ring-2 focus:ring-blue-500 dark:text-white")

  // --- COBERTURA ---
  div(class="border-t border-slate-100 dark:border-slate-700 pt-4")
    h3(class="text-sm font-bold text-slate-400 uppercase tracking-wider mb-4") üè• Cobertura M√©dica
    div(class="grid grid-cols-1 md:grid-cols-2 gap-6")
      div
        label(class="block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider mb-2") Obra Social
        input(type="text" name="obra_social" value=(data ? data.obra_social : '') class="w-full px-4 py-3 bg-slate-50 dark:bg-slate-900 border border-slate-300 dark:border-slate-600 rounded-xl focus:ring-2 focus:ring-blue-500 dark:text-white")
      
      div
        label(class="block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider mb-2") Nro Afiliado
        input(type="text" name="numero_afiliado" value=(data ? data.numero_afiliado : '') class="w-full px-4 py-3 bg-slate-50 dark:bg-slate-900 border border-slate-300 dark:border-slate-600 rounded-xl focus:ring-2 focus:ring-blue-500 dark:text-white")