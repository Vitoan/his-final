extends ../layouts/main

block content
  div(class="flex flex-col md:flex-row justify-between items-center mb-8 gap-4")
    div
      h1(class="text-3xl font-bold text-slate-900 dark:text-white") Tablero ClÃ­nico
      p(class="text-slate-500 dark:text-slate-400") Monitoreo de pacientes internados en tiempo real

    // BUSCADOR CON BORDE MÃS FUERTE
    div(class="relative w-full md:w-96")
      span(class="absolute inset-y-0 left-0 flex items-center pl-3 text-slate-400") ðŸ”
      input(type="text" id="searchInput" placeholder="Buscar paciente, DNI o cama..." class="w-full pl-10 pr-4 py-2 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-xl shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all dark:text-white")

  if pacientes.length === 0
    div(class="bg-blue-50 dark:bg-blue-900/20 border-l-4 border-blue-500 text-blue-700 dark:text-blue-300 p-6 rounded-r-xl shadow-sm")
      p(class="font-medium") No hay pacientes internados actualmente.
  else
    div(id="gridPacientes" class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6")
      each internacion in pacientes
        // TARJETA CON BORDES MÃS MARCADOS (border-slate-300)
        div(class="paciente-card bg-white dark:bg-slate-800 rounded-2xl shadow-sm border border-slate-300 dark:border-slate-600 hover:shadow-md transition-all overflow-hidden flex flex-col group")
          
          // Encabezado
          div(class="p-5 border-b border-slate-200 dark:border-slate-700 bg-slate-50/50 dark:bg-slate-700/30")
            div(class="flex justify-between items-start")
              div
                h3(class="nombre-paciente text-lg font-bold text-slate-900 dark:text-white") #{internacion.Paciente.nombre} #{internacion.Paciente.apellido}
                p(class="text-xs text-slate-500 dark:text-slate-400 font-mono mt-1") DNI: 
                   span(class="dni-paciente") #{internacion.Paciente.dni}
              
              div(class="text-right")
                span(class="block text-xs font-bold text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/30 px-2 py-1 rounded-lg border border-blue-200 dark:border-blue-800")
                  | Hab #{internacion.Cama.Habitacion.numero}
                span(class="cama-paciente block text-xs text-slate-400 mt-1") Cama #{internacion.Cama.numero_cama}

          // Cuerpo
          div(class="p-5 flex-1")
            p(class="text-xs font-bold text-slate-400 uppercase tracking-wider mb-2") Ãšltima EvoluciÃ³n
            if internacion.Evolucions.length > 0
              - const ultimaEvo = internacion.Evolucions[0]
              div(class="bg-amber-50 dark:bg-amber-900/20 border-l-2 border-amber-300 dark:border-amber-600 p-3 rounded text-sm text-slate-700 dark:text-slate-300 italic")
                p "#{ultimaEvo.nota}"
                div(class="mt-2 text-right")
                   span(class="text-xs font-bold text-teal-600 dark:text-teal-400") #{ultimaEvo.Autor ? ultimaEvo.Autor.nombre : 'Personal'}
            else
              p(class="text-slate-400 text-sm italic") Sin notas recientes.

          // Acciones
          div(class="p-4 bg-slate-50 dark:bg-slate-800/50 border-t border-slate-200 dark:border-slate-700 text-right")
            a(href=`/clinica/paciente/${internacion.id}` class="inline-block bg-slate-800 dark:bg-slate-700 hover:bg-slate-700 dark:hover:bg-slate-600 text-white text-sm font-medium py-2 px-4 rounded-lg transition-colors shadow-sm") Ver Historia â†’

  script.
    const searchInput = document.getElementById('searchInput');
    const cards = document.querySelectorAll('.paciente-card');
    searchInput.addEventListener('keyup', (e) => {
      const term = e.target.value.toLowerCase();
      cards.forEach(card => {
        const text = card.textContent.toLowerCase();
        card.style.display = text.includes(term) ? 'flex' : 'none';
      });
    });